<Window x:Class="VentWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:l="clr-namespace:VentWPF"
        xmlns:ex="http://propertytools.org/wpf"
        xmlns:vm="clr-namespace:VentWPF.ViewModel"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.FontWeight="Medium"
        TextElement.FontSize="14"
        FontFamily="{md:MaterialDesignFont}"
        Title="MainWindow" Height="720" Width="1280">
  <Window.Resources>
    <Style TargetType="{x:Type Image}">
      <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality" />
    </Style>
    <vm:Heater_Water x:Key="hw"/>
    <vm:Heater_Gas x:Key="hg"/>
    <vm:Heater_Electric x:Key="he"/>
  </Window.Resources>
  <Window.DataContext>
    <vm:MainViewModel/>
  </Window.DataContext>
  <DockPanel>
    <Menu DockPanel.Dock="Top" Height="25">
      <MenuItem Header="Файл" Height="25"/>
    </Menu>
    <StatusBar DockPanel.Dock="Bottom">
      <TextBlock Text="Статус"/>
    </StatusBar>
    <Grid>
      <Grid.ColumnDefinitions >
        <ColumnDefinition Width="5*" MinWidth="600"/>
        <ColumnDefinition Width="2*" MinWidth="400"/>
      </Grid.ColumnDefinitions>
      <GridSplitter HorizontalAlignment="Right" Width="6" Margin="0,0,0,0" Background="Transparent" Panel.ZIndex="2"/>
      <DockPanel>
        <Rectangle DockPanel.Dock="Right" Width="5" VerticalAlignment="Stretch" Fill="{DynamicResource MaterialDesignDarkBackground}"/>
        <!--Верхняя панель для содания элементов-->
        <md:Card  DockPanel.Dock="Top" Background="LightGray">
          <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
             <UniformGrid Width="830" Height="90" Columns="10" HorizontalAlignment="Left">
               <UniformGrid.Resources>
                  <Style TargetType="{x:Type Button}" BasedOn="{StaticResource MaterialDesignFlatButton}" >
                    <Setter Property="Width" Value="75" />
                  <Setter Property="Height" Value="75" />
                </Style>
                  <Style TargetType="{x:Type Image}">
                    <Setter Property="Margin" Value="-16" />
                  </Style>
                </UniformGrid.Resources>
              <Button>
                <Image Source="{Binding HeaderImages.Valves}"/>
              </Button>
              <Button>
                <Image Source="{Binding HeaderImages.Filters}"/>
              </Button>
              <Button>
                <Image Source="{Binding HeaderImages.Heaters}"/>
              </Button>
              <Button>
                <Image Source="{Binding HeaderImages.Coolers}"/>
              </Button>
              <Button>
                <Image Source="{Binding HeaderImages.Empty}"/>
              </Button>            
              <Button>
                <Image Source="{Binding HeaderImages.Empty}"/>
              </Button>  
              <Button>
                <Image Source="{Binding HeaderImages.Empty}"/>
              </Button> 
              <Button>
                <Image Source="{Binding HeaderImages.Sections}"/>
              </Button>  
              <Button>
                <Image Source="{Binding HeaderImages.Filters}"/>
              </Button>  
              <!--Заменить на увлажнитель-->
              <Button Command="{Binding AddElementCommand}" CommandParameter="{StaticResource hw}" Background="LightPink">
                <Image DataContext="{StaticResource hw}" Source="{Binding Image}" />
              </Button>
                <!--Для рекуператора-->
              <Button Visibility="Collapsed">
                <Image Source="{Binding HeaderImages.Empty}"/>
              </Button> 




              
          </UniformGrid>
          </ScrollViewer>
         
        </md:Card>
        <!--Нижняя панель для констурирования системы-->
        <md:Card DockPanel.Dock="Bottom" Background="LightGray">
          <ScrollViewer VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Auto">
            <ListBox Width="750" Height="150" HorizontalAlignment="Left"
                   ItemsSource="{Binding Table}"  
                   SelectedItem="{Binding SelectedElement}"
                   SelectedIndex="{Binding SelectedIndex}">
              <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                  <UniformGrid Rows="2" Columns="10">
                    <UniformGrid.Style >
                      <Style TargetType="{x:Type UniformGrid}">
                        <Style.Triggers>
                          <DataTrigger Binding="{Binding CurrentProject.Rows}" Value="1">
                            <Setter Property="Rows" Value="1" />
                          </DataTrigger>
                        </Style.Triggers>
                      </Style>
                    </UniformGrid.Style>
                  </UniformGrid>
                </ItemsPanelTemplate>
              </ListBox.ItemsPanel>
              <ListBox.ItemTemplate>
                <DataTemplate DataType="ElementVM">
                  <Image Source="{Binding Image}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="-6"/>
                </DataTemplate>
              </ListBox.ItemTemplate>
            </ListBox>
          </ScrollViewer>
        </md:Card>
        <Rectangle DockPanel.Dock="Bottom" Height="5" HorizontalAlignment="Stretch" Fill="{DynamicResource MaterialDesignDarkBackground}"/>
        <Rectangle DockPanel.Dock="Top" Height="5" HorizontalAlignment="Stretch" Fill="{DynamicResource MaterialDesignDarkBackground}"/>
        <!--Основная панель-->
        <TabControl Margin="0,2,0,0">
          <TabItem Header="Проект">
            <ex:PropertyGrid SelectedObject="{Binding CurrentProject}"  Width="400" TabVisibility="Collapsed"/>
          </TabItem>
          <TabItem Header="Подбор"/>
          <TabItem Header="Графики"/>
          <TabItem Header="Схема"/>
          <TabItem Header="Отчёт"/>
          <TabItem Header="Электроника"/>
          <TabItem Header="3D"/>
        </TabControl>
      </DockPanel>
      <ScrollViewer Grid.Column="1">
        <Grid  Margin="7,2,0,0" >
        <Grid.RowDefinitions>
          <RowDefinition Height="auto"/>
          <RowDefinition Height="auto"/>
          <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition/>
          </Grid.ColumnDefinitions>
          <Image Source="{Binding SelectedElement.Image}" Width="50" Height="50"/>
          <TextBlock Grid.Column="1" Text="{Binding SelectedElement.Name}" 
                     Style="{DynamicResource MaterialDesignHeadline6TextBlock}" 
                     VerticalAlignment="Bottom" 
                     TextWrapping="WrapWithOverflow"
                     Margin="4,0"/>
        </Grid>
        <ex:PropertyGrid Grid.Row="1" SelectedObject="{Binding SelectedElement}" TabVisibility="Collapsed"/>
        <DataGrid Grid.Row="2" ItemsSource="{Binding Table}" Height="500"/>
      </Grid>
      </ScrollViewer>
      
    </Grid>
  </DockPanel>
</Window>
